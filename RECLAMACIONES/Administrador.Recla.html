<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Administrador de Reclamos </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="panel-admin.css">

</head>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-2 sidebar">
      <h5>Administrador de reclamos: </h5>
      <ul class="nav flex-column">
        <li class="nav-item"><a class="nav-link active" href="#tablaReclamos"> Reclamos <span class="badge bg-dark" id="contadorReclamos">0</span></a></li>
        <li class="nav-item"><a class="nav-link" href="#"> Clientes</a></li>
        <li class="nav-item"><a class="nav-link" href="#"> Reportajes</a></li>
        <li class="nav-item"><a class="nav-link" href="#"> Configuración</a></li>
      </ul>
    </div>


    <!-- Main Panel -->
    <div class="col-md-10">
      <div class="p-4">
        <input type="text" class="form-control mb-3" placeholder="Buscar reclamos por cliente, ID o asunto...">


        <div class="row mb-4">
          <div class="col-md-3 status-box">Reclamos totales: <strong>4</strong></div>
          <div class="col-md-3 status-box">Pendientes: <strong class="text-warning">1</strong></div>
          <div class="col-md-3 status-box">En proceso: <strong class="text-primary">1</strong></div>
          <div class="col-md-3 status-box">Resueltos: <strong class="text-success">1</strong></div>
        </div>


        <table class="table table-striped table-hover" id="tablaReclamos">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Categoría del servicio</th>
              <th>Fecha de reclamo</th>
              <th>Solicitud</th>
              <th>Descripción</th>
              <th>Canal de atención</th>
              <th>Estado</th>
              <th>Prioridad</th>
              <th>Ver más detalles</th>
            </tr>
          </thead>
          <tbody>
            <tr data-estado="Pendiente" data-prioridad="Alta">
              <td>REC-D01mmnmjkl</td>
              <td>Maria González<br><small>maria.gonzalez@email.com</small></td>
              <td>Producto</td>
              <td>14/1/2024</td>
              <td>Reembolso</td>
              <td>Producto llegó dañado al abrirlo ,no se ve como en la foto.</td>
              <td>Web</td>
              <td><span class="badge badge-pendiente">Pendiente</span></td>
              <td><span class="badge prioridad-alta">Alta</span></td>
              <td><button class="btn btn-sm btn-primary" onclick="verDetalles('REC-D01')">Ver más</button></td>
            </tr>
            <tr data-estado="En proceso" data-prioridad="Media">
              <td>REC-D02</td>
              <td>Carlos Mendoza<br><small>carlos.mendoza@email.com</small></td>
              <td>Servicio al cliente</td>
              <td>13/1/2024</td>
              <td>Atención</td>
              <td>El producto llego en mal estado,todo golpeado,por favor,resuelvanlo.</td>
              <td>Web</td>
              <td><span class="badge badge-proceso">En proceso</span></td>
              <td><span class="badge prioridad-media">Media</span></td>
              <td><button class="btn btn-sm btn-primary" onclick="verDetalles('REC-D02')">Ver más</button></td>
            </tr>
            <tr data-estado="Resuelto" data-prioridad="Alta">
              <td>REC-D03</td>
              <td>Ana Rodríguez<br><small>ana.rodriguez@email.com</small></td>
              <td>Facturación</td>
              <td>1/12/2024</td>
              <td>Revisión</td>
              <td>Cobro duplicado en la factura final</td>
              <td>Web</td>
              <td><span class="badge badge-resuelto">Resuelto</span></td>
              <td><span class="badge prioridad-alta">Alta</span></td>
              <td><button class="btn btn-sm btn-primary" onclick="verDetalles('REC-D03')">Ver más</button></td>
            </tr>
            <tr data-estado="Rechazado" data-prioridad="Baja">
              <td>REC-D04</td>
              <td>Luis Torres<br><small>luis.torres@email.com</small></td>
              <td>Producto</td>
              <td>1/11/2024</td>
              <td>Reemplazo</td>
              <td>Producto sin función desde el primer uso,me engañaron,no me crecio pelo.</td>
              <td>Presencial</td>
              <td><span class="badge badge-rechazado">Rechazado</span></td>
              <td><span class="badge prioridad-baja">Baja</span></td>
              <td><button class="btn btn-sm btn-primary" onclick="verDetalles('REC-D04')">Ver más</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


<!-- detalles -->
<div class="modal fade" id="modalDetalles" tabindex="-1" aria-labelledby="modalDetallesLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalDetallesLabel">Detalles del reclamo</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body" id="contenidoDetalles">

        <!-- Contenido dinámico, boris-->
      </div>
    </div>
  </div>
</div>


<script>
function verDetalles(id) {
  const fila = [...document.querySelectorAll('#tablaReclamos tbody tr')].find(f => f.cells[0].innerText === id);
  const contenido = `
    <p><strong>ID:</strong> ${fila.cells[0].innerHTML}</p>
    <p><strong>Cliente:</strong> ${fila.cells[1].innerHTML}</p>
    <p><strong>Categoría:</strong> ${fila.cells[2].innerText}</p>
    <p><strong>Fecha:</strong> ${fila.cells[3].innerText}</p>
    <p><strong>Solicitud:</strong> ${fila.cells[4].innerText}</p>
    <p><strong>Descripción:</strong> ${fila.cells[5].innerText}</p>
    <p><strong>Canal:</strong> ${fila.cells[6].innerText}</p>
    <p><strong>Estado:</strong> ${fila.cells[7].innerText}</p>
    <p><strong>Prioridad:</strong> ${fila.cells[8].innerText}</p>
  `;
  document.getElementById('contenidoDetalles').innerHTML = contenido;
  new bootstrap.Modal(document.getElementById('modalDetalles')).show();
}


function filtrarTabla() {
  const estado = document.getElementById('filterEstado').value;
  const prioridad = document.getElementById('filterPrioridad').value;
  const filas = document.querySelectorAll('#tablaReclamos tbody tr');


  let contador = 0;
  filas.forEach(fila => {
    const estadoFila = fila.getAttribute('data-estado');
    const prioridadFila = fila.getAttribute('data-prioridad');
    const mostrarEstado = (estado === 'Todos' || estado === estadoFila);
    const mostrarPrioridad = (prioridad === 'Todas' || prioridad === prioridadFila);
    const visible = mostrarEstado && mostrarPrioridad;
    fila.style.display = visible ? '' : 'none';
    if (visible && (estadoFila === 'Pendiente' || estadoFila === 'En proceso')) contador++;
  });
  document.getElementById('contadorReclamos').innerText = contador;
}


window.onload = filtrarTabla;
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

